/* TOC Navigation - Hierarchical styling inspired by old theme */

.toc-navigation {
  /* Remove scrolling to prevent double scrollbars - let the page handle scrolling */
}

.toc-navigation ol,
.toc-navigation ul {
  margin: 0;
  padding: 0;
}

/* Ordered list styling with counters (like old theme) */
.toc-navigation ol {
  list-style-type: none;
  counter-reset: item;
}

.toc-navigation ol li a:first-of-type::before {
  counter-increment: item;
  content: counters(item, ".") ". ";
  font-weight: bold;
  margin-right: 0.3125rem; /* 5px */
  color: var(--accent-color);
  opacity: 0.8;
}

/* Unordered list styling */
.toc-navigation ul {
  list-style: none;
}

/* Base list item styling */
.toc-navigation li {
  margin: 0.375rem 0 0.375rem 1.25rem; /* 6px 0 6px 20px - reduced from 15px */
  padding: 0.125rem; /* 2px - reduced from 5px */
  position: relative;
}

/* Nested list styling */
.toc-navigation li > ol,
.toc-navigation li > ul {
  margin-top: 0.25rem; /* 4px - reduced from 10px */
  padding-left: 0.5rem; /* 8px - reduced from 10px */
  margin-bottom: -0.125rem; /* -2px - reduced from -5px */
}

.toc-navigation li > ol > li:last-child,
.toc-navigation li > ul > li:last-child {
  margin-bottom: 0;
}

/* Base link styling */
.toc-navigation a {
  display: block;
  color: var(--card-text-color-secondary);
  text-decoration: none;
  border-radius: 0.375rem;
  transition: all 0.2s ease;
  font-size: 0.875rem;
  line-height: 1.3;
  padding: 0.375rem 0.75rem; /* reduced from 0.5rem */
  border-left: 3px solid transparent;
  margin: 0.125rem 0; /* reduced from 0.25rem */
  position: relative;
}

.toc-navigation a:hover {
  background-color: var(--card-background-selected);
  color: var(--card-text-color-main);
  border-left-color: var(--accent-color);
  transform: translateX(3px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.toc-navigation a:focus {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
}

/* Active TOC item styling (like old theme) */
.toc-navigation a.active {
  border-left: 4px solid var(--accent-color); /* --heading-border-size equivalent */
  font-weight: 600;
  background-color: var(--card-background-selected);
  color: var(--card-text-color-main);
  transform: translateX(3px);
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

/* Progressive indentation for nested active items (like old theme SCSS loop) */
/* Level 1: Direct children of root ul */
.toc-navigation > ul > li.active-class > a {
  margin-left: calc(-25px - 1em);
  padding-left: calc(25px + 1em - 4px);
}

/* Level 2: ul > li > ul > li */
.toc-navigation > ul > li > ul > li.active-class > a {
  margin-left: calc(-60px - 1em);
  padding-left: calc(60px + 1em - 4px);
}

/* Level 3: ul > li > ul > li > ul > li */
.toc-navigation > ul > li > ul > li > ul > li.active-class > a {
  margin-left: calc(-95px - 1em);
  padding-left: calc(95px + 1em - 4px);
}

/* Level 4: ul > li > ul > li > ul > li > ul > li */
.toc-navigation > ul > li > ul > li > ul > li > ul > li.active-class > a {
  margin-left: calc(-130px - 1em);
  padding-left: calc(130px + 1em - 4px);
}

/* Progressive indentation for nested active items in ordered lists */
/* Level 1: Direct children of root ol */
.toc-navigation > ol > li.active-class > a {
  margin-left: calc(-9px - 1em);
  padding-left: calc(9px + 1em - 4px);
  display: block;
}

/* Level 2: ol > li > ol > li */
.toc-navigation > ol > li > ol > li.active-class > a {
  margin-left: calc(-44px - 1em);
  padding-left: calc(44px + 1em - 4px);
  display: block;
}

/* Level 3: ol > li > ol > li > ol > li */
.toc-navigation > ol > li > ol > li > ol > li.active-class > a {
  margin-left: calc(-79px - 1em);
  padding-left: calc(79px + 1em - 4px);
  display: block;
}

/* Level 4: ol > li > ol > li > ol > li > ol > li */
.toc-navigation > ol > li > ol > li > ol > li > ol > li.active-class > a {
  margin-left: calc(-114px - 1em);
  padding-left: calc(114px + 1em - 4px);
  display: block;
}

/* Root level padding for unordered lists */
.toc-navigation > ul {
  padding: 0 1em;
}

/* Improved visual hierarchy for nested TOC items */
.toc-navigation > ul > li,
.toc-navigation > ol > li {
  border-left: 2px solid transparent;
  transition: border-color 0.2s ease;
}

.toc-navigation > ul > li:hover,
.toc-navigation > ol > li:hover {
  border-left-color: var(--accent-color);
}

/* Progressive indentation for better hierarchy */
.toc-navigation li li {
  margin-left: 0.75rem;
  padding-left: 0.5rem;
  border-left: 1px solid var(--card-separator-color);
  opacity: 0.95;
}

.toc-navigation li li li {
  margin-left: 0.5rem;
  opacity: 0.9;
}

.toc-navigation li li li li {
  margin-left: 0.25rem;
  opacity: 0.85;
}

/* Subtle visual cues for nested levels */
.toc-navigation li li a {
  font-size: 0.8rem;
}

.toc-navigation li li li a {
  font-size: 0.75rem;
}

.toc-navigation li li li li a {
  font-size: 0.7rem;
}

/* Visual hierarchy indicators for nested items */
.toc-navigation li > ul > li > a {
  position: relative;
}

.toc-navigation li > ul > li > a::before {
  content: "•";
  position: absolute;
  left: -0.5rem;
  color: var(--accent-color);
  opacity: 0.5;
  font-size: 0.75rem;
  transition: opacity 0.2s ease;
}

.toc-navigation li > ul > li > a:hover::before {
  opacity: 0.8;
}

.toc-navigation li > ul > li > ul > li > a::before {
  content: "◦";
  position: absolute;
  left: -0.5rem;
  color: var(--accent-color);
  opacity: 0.4;
  font-size: 0.6875rem;
  transition: opacity 0.2s ease;
}

.toc-navigation li > ul > li > ul > li > a:hover::before {
  opacity: 0.7;
}

.toc-navigation li > ul > li > ul > li > ul > li > a::before {
  content: "▪";
  position: absolute;
  left: -0.5rem;
  color: var(--accent-color);
  opacity: 0.3;
  font-size: 0.625rem;
  transition: opacity 0.2s ease;
}

.toc-navigation li > ul > li > ul > li > ul > li > a:hover::before {
  opacity: 0.6;
}

/* Smooth scrolling for TOC links */
.toc-navigation a {
  scroll-behavior: smooth;
}

/* Enhanced focus states for accessibility */
.toc-navigation a:focus-visible {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
  background-color: var(--card-background-selected);
}

/* Click feedback effect */
.toc-navigation a.clicked {
  background-color: var(--accent-color);
  color: var(--accent-color-text);
  transform: translateX(4px) scale(0.98);
  transition: all 0.1s ease;
}
