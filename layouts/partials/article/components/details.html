<div class="p-4 sm:p-6 lg:p-8">
    {{ if .Params.categories }}
    <header class="flex flex-wrap gap-2 mb-4">
        {{ range (.GetTerms "categories") }}
            <a href="{{ .RelPermalink }}" class="inline-block px-3 py-1 bg-accent text-accent-text text-sm font-semibold rounded-tag hover:bg-accent-darker transition-colors duration-200" {{ with .Params.style }}style="background-color: {{ .background }}; color: {{ .color }};"{{ end }}>
                {{ .LinkTitle }}
            </a>
        {{ end }}
    </header>
    {{ end }}

    <div class="mb-4">
        <h2 class="text-lg sm:text-xl lg:text-2xl font-bold text-card-text mb-2 group-hover:text-accent transition-colors duration-300">
            <a href="{{ .RelPermalink }}" class="hover:underline decoration-accent decoration-2 underline-offset-4">
                {{- .Title -}}
            </a>
        </h2>
    
        {{ with .Params.description }}
        <h3 class="text-sm sm:text-base lg:text-lg text-card-text-secondary mb-4">
            {{ . }}
        </h3>
        {{ end }}
    </div>

    {{ $showReadingTime := .Params.readingTime | default (.Site.Params.article.readingTime) }}
    {{ $showDate := not .Date.IsZero }}
    {{ $isListPage := or .IsHome .IsSection (eq .Kind "taxonomy") (eq .Kind "term") }}
    {{ $showCopyButton := and (not $isListPage) (or (.OutputFormats.Get "LLMS") (.OutputFormats.Get "MARKDOWN")) }}
    {{ $showFooter := or $showDate $showReadingTime $showCopyButton }}
    {{ if $showFooter }}
    <footer class="flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-card-text-tertiary">
        {{ if $showDate }}
            <div class="flex items-center gap-2">
                {{ partial "helper/icon" "date" }}
                <time class="">
                    {{- .Date | time.Format (or .Site.Params.dateFormat.published "Jan 02, 2006") -}}
                </time>
            </div>
        {{ end }}

        {{ if $showReadingTime }}
            <div class="flex items-center gap-2">
                {{ partial "helper/icon" "clock" }}
                <time class="">
                    {{ T "article.readingTime" .ReadingTime }}
                </time>
            </div>
        {{ end }}
        
        {{/* Copy as Markdown button */}}
        {{ if $showCopyButton }}
            <div class="copy-as-markdown flex items-center gap-2 w-full sm:w-auto">
                <button class="inline-flex items-center justify-center gap-2 px-3 py-1 text-xs sm:text-sm bg-card-bg-selected text-card-text-secondary rounded-card hover:bg-accent hover:text-accent-text transition-all duration-200 w-full sm:w-auto" 
                        title="{{ T "article.copyAsMarkdown" }}"
                        data-copy-text="{{ T "article.copyAsMarkdown" }}"
                        data-copied-text="{{ T "article.copied" }}">
                    {{ partial "helper/icon" "clipboard" }}
                    <span>{{ T "article.copyAsMarkdown" }}</span>
                </button>
            </div>
        {{ end }}
    </footer>
    {{ end }}

    {{ if .IsTranslated }}
        <footer class="flex items-center gap-2 text-sm text-card-text-secondary mt-4">
            {{ partial "helper/icon" "language" }}
            <div>
                {{ range .Translations }}
                    <a href="{{ .Permalink }}" class="link">{{ .Language.LanguageName }}</a>
                {{ end }}
            </div>
        </footer>
    {{ end }}
</div>
