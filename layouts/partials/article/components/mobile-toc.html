{{/* Mobile TOC Component - Displays TOC on mobile/tablet devices */}}

{{ $TOCManuallyDisabled := eq .Params.toc false }}
{{ $TOCGloballyEnabled := .Site.Params.article.toc.enabled | default true }}
{{ $TOCEnabled := and (not $TOCManuallyDisabled) $TOCGloballyEnabled }}
{{ $hasTOC := gt (len .TableOfContents) 0 }}
{{ $minHeadings := .Site.Params.article.toc.minHeadings | default 1 }}
{{ $headingCount := len (findRE "<li>" .TableOfContents) }}
{{ $hasEnoughHeadings := ge $headingCount $minHeadings }}
{{ $showTOC := and $TOCEnabled $hasTOC $hasEnoughHeadings }}

{{ if $showTOC }}
<!-- Mobile TOC - Visible on mobile/tablet, hidden on desktop -->
<div class="lg:hidden mb-6 bg-card-bg rounded-card border border-card-separator/30 shadow-l1 hover:shadow-l2 transition-all duration-300 hover:border-accent/20 animate-fade-in">
    {{ partial "article/components/toc-core" (dict 
        "context" .
        "id_prefix" "mobile-toc"
        "show_toggle" true
        "toggle_classes" ""
        "wrapper_classes" ""
        "content_classes" ""
    ) }}
</div>
{{ end }}