{{- $query := first 1 (where .Context.Site.Pages "Layout" "==" "search") -}}
{{- if $query -}}
    {{- $searchPage := index $query 0 -}}
    <section class="bg-card-bg rounded-card p-card shadow-l1 mb-widget search-widget">
        <div class="text-accent mb-4">
            {{ partial "helper/icon" "search" }}
        </div>
        <h2 class="text-xl font-semibold text-card-text mb-4">{{ T "search.title" }}</h2>
        
        <form action="{{ $searchPage.RelPermalink }}" class="space-y-3" {{ with $searchPage.OutputFormats.Get "json" -}}data-json="{{ .Permalink }}" {{- end }}>
            <div class="relative">
                <input name="keyword" required placeholder="{{ T `search.placeholder` }}" 
                       class="w-full px-4 py-3 pr-12 border border-card-separator rounded-card bg-card-bg text-card-text placeholder-card-text-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200" />
                <button type="submit" title="{{ T `search.title` }}" 
                        class="absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-card-text-tertiary hover:text-accent transition-colors duration-200">
                    {{ partial "helper/icon" "search" }}
                </button>
            </div>
        </form>
    </section>
{{- else -}}
    {{- warnf "Search page not found. Create a page with layout: search." -}}
{{- end -}}